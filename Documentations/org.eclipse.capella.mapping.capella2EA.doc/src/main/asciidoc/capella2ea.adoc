= Capella to Enterprise Architect Extension User Guide
Artal <Artal.com>
v1.0, 2020/02/28: First Draft
:appversion: 1.1.0
:doctype: article
:encoding: utf-8
:lang: en
:toc: left
:numbered:
:imagesdir: ./images
:experimental:
:systemArchProj: IFE_System
:stylesdir: ./css
:stylesheet: doc.css
:linkcss:


== Introduction
Here is the user guide of the Capella to Enterprise Architect extension.

This extension allows to transform a Capella model to an Enterprise Architect model.
This manual is composed of three sections:

- *Installation*: description of the extension installation

- *Capella*: description of the capella extension and how to use it

- *Enterprise Architect*: explains how to import the model exported from Capella into Enterprise Architect.

<<<

== Procedure installation
=== Product description
The product is delivered as a ZIP archive: *Delivery_CapellaEABridge_X.Y.Z.zip*, where "X.Y.Z" represents the current version of the extension.

The ZIP archive contains the extension products for the both *1.3.x* and *1.4.x* Capella versions.

image::CAPUML_Delivery_versions.JPG[CAPUML_Delivery_versions.JPG,title="Compatible Capella versions."] 


For each Capella version, a *drop-in* and an *update site* are delivered.

image::CAPUML_dropins_udaptesites.JPG[CAPUML_dropins_udaptesites.JPG,title="Dropins and Update-site are delivered."] 

A drop-in is delivered as ZIP archive: *CapellaEABridge_VP-X.Y.Z-dropins.zip*, where X.Y.Z is the version of the extension.

image::CAPUML_dropins.JPG[CAPUML_dropins.JPG, title="Dropin delivery."] 

An update site is delivered as ZIP archive: *CapellaEABridge_X.Y.Z_updatesite.zip*, where X.Y.Z the version of the extension.

image::CAPUML_updatesites.JPG[CAPUML_updatesites.JPG,title="Update-site delivery."] 

<<<


=== Drop-in installation
Unzip the Delivery_CapellaEABridge_X.Y.Z.zip archive.

image::CAPUML_Extract_delivery.JPG[CAPUML_Extract_delivery.JPG,title="Delivery Extraction."] 

Open the *dropins* directory.

image::CAPUML_dropin_to_copied.JPG[CAPUML_dropin_to_copied.JPG,title="Dropin to copied"] 

Copy/paste and unzip the CapellaEABridge_X.Y.Z-dropins.zip into the *dropins* directory of the Capella_X.Y.Z installation.

image::CAPUML_Extract_dropin.JPG[CAPUML_Extract_dropin.JPG,title="Extract dropin."] 

It is then possible to delete the CapellaEABridge_X.Y.Z-dropins.zip archive.



=== UpdateSite installation

Unzip Delivery_CapellaEABridge_X.Y.Z.zip archive.

image::CAPUML_Extract_delivery.JPG[CAPUML_Extract_delivery.JPG,title="Delivery Extraction."] 

Execute the Capella software.

In the Capella "Help" menu, select "Install New Software...".

image::CAPUML_install_software.JPG[CAPUML_install_software.JPG,title="Menu to install new update site."] 

In the opened wizard, click on the "Add..." button and choose the *CapellaEABridge_X.Y.Z_updatesite.zip* archive.
Set CapellaEABridge in the "Name" field.

image::CAPUML_Add_Repo.JPG[CAPUML_Add_Repo.JPG,title="Add CapellaEABridge repository."] 

Select the CapellaEABridge feature and click on the "Next" button.

image::CAPUML_SelectFeature.JPG[CAPUML_SelectFeature.JPG,title="Select the new feature."] 

Click again on the "Next" button.

image::CAPUML_ReviewItemtoInstall.JPG[CAPUML_ReviewItemtoInstall.JPG, title="Review the items to be installed."] 

Accept the terms of the licence agreement and click on the "Finish" button.

image::CAPUML_Licenses.JPG[CAPUML_Licenses.JPG, title="Accept license agreement."] 

Once the CapellaEABridge udapte site is installed, you must restart Capella to activate it.

<<<

=== Check extension installation

After installation procedure, launch Capella.

Check in the plugins installation CapellaEABridge is correctly installed.

In the Capella "Help" menu, select "About Capella".

image::CAPUML_AboutCapella.JPG[CAPUML_AboutCapella.JPG,title="About Capella."] 

In the opened wizard, select "Installation details" button.

image::CAPUML_InstallationDetails.JPG[CAPUML_InstallationDetails.JPG, title="Installation details."] 

Check the Capella to Enterprise Architecture feature exists.

image::CAPUML_Installation.JPG[CAPUML_Installation.JPG, title="Capella to Enterprise feature."] 

<<<

== Export from Capella

=== Pre-requisite

- A Capella Project: the goal of the Capella to Enterprise Architect extension is to transform an existing capella project into a EA model stored in a XMI/UML file.

In the following sections, the *Camera SysML2 Example* Capella project is used to illustrate the process.

image::CAPUML_CapellaProject.JPG[CAPUML_CapellaProject.JPG, title="Capella project example."] 

<<<

=== Launch the Export model

==== Open Contextual "Exports" menu

Right click on a Capella Element, and select the "Exports" menu.

image::CAPUML_ExportsMenu.JPG[CAPUML_ExportsMenu.JPG, title="Exports menu"] 

==== Configure the Export wizard

The opened wizard shall be filled with:

- The type of the transformation.
- The path of the target file.
- The (predefined) algorithm to use.

image::CAPUML_ExportWizard.JPG[CAPUML_ExportWizard.JPG, title="Export wizard."] 


Select the type of the transformation: the field proposes the "Capella to Enterprise Architect" type.

image::CAPUML_TypeTransfo.JPG[CAPUML_TypeTransfo.JPG, title="Type of transformation."] 

Select a target file: set the target path or click on the "Browse..." button.
Using the opened wizard, all the existing xml files are displayed.

image::CAPUML_targetpath.JPG[CAPUML_targetpath.JPG, title="Selection output file."] 

Select an existing xml file, or set a new file name. Click on the "Open" button.

image::CAPUML_SelectTargetPathWizard.JPG[CAPUML_SelectTargetPathWizard.JPG, title="Export wizard."]

Select a predefined algorithm.

image::CAPUML_AlgoSelection.JPG[CAPUML_AlgoSelection.JPG, title="Algorithm selection."]

The OK button is available only when the three fields are filled.

image::CAPUML_FilledWizard.JPG[CAPUML_FilledWizard.JPG, title="Filled Exports wizard"] 

Click on the "OK" button.

The Enterprise Architect model is built and persisted in the generated output xml file.

<<<

== Import to Enterprise Architect

=== Create a new Enterprise Architect Project.

Start Enterprise Architect.
Click on the "New File" menu.

image::EA_NewProject.JPG[EA_NewProject.JPG, title="New project..."] 

In the displayed standard Windows file browser dialog, locate a suitable folder for your project and, in the "File name" field, type in a distinctive name.
Click on the "Save" button.

image::EA_CreateProject.JPG[EA_CreateProject.JPG, title="Create a new project."] 

=== Import Enterprise Architect model

In the "Browser" explorer, select the "Model" node. 

In the Enterprise Architect ribbon, select "Publish -> Model Exchange -> Import XMI -> Import Package from XMI" menu.

image::EA_Import.JPG[EA_Import.JPG, title="Import XML file."] 

In the displayed "Import Package from XMI" dialog:

- *Filename* field: type the directory path and filename from which to import the XMI file.
- *Baseline Package after import* checkbox: Select this checkbox to open the "Create Baseline" dialog, through which to baseline the imported Package once the import is complete.
- *Import* button: Click on this button to start the import
- *Close* button: Click on this button to close the dialog.

image::EA_ImportWizard.JPG[EA_ImportWizard.JPG, title="Import XML wizard."] 

image::EA_NewBaseLine.JPG[EA_NewBaseLine.JPG, title="New Baseline."]

=== Inspect Import results

In the "Browser" explorer, the imported data are displayed.
Under the "Model" node, "Import Capella" package is created. This package contains all imported data from Capella.

image::EA_Model.JPG[EA_Model.JPG, title="EA model."] 

<<<

Create a component diagram and drag and drop all components inside.

image::EA_Component_diagram.JPG[EA_Component_diagram.JPG, title="Component diagram."] 

<<<

Create a Class diagram and drag and drop all others elements.

image::EA_ClassDiagram.JPG[EA_ClassDiagram.JPG, title="Class diagram."] 

<<<

=== Merge in Enterprise Architect

In Capella software, modify the name of the following Capella elements:

-  "Camera power button" component name to "Camera power button from Capella"

-  "Sensor Command" exchange item name to "Sensor Command from Capella"

-  "Timestamp" class name to "Timestamp from Capella".


Export the Capella model as it's describe in the <<Export from Capella>> section.


In Enterprise Architect, in the previously imported model, modify the name of the following EA elements:

- "Camera power button" component to "Camera power button from EA"

- "Sensor Command" operation to "Sensor Command from EA"

- "Explosure Triangle"  datatype to "Explosure Triangle from EA".

It's very important to increment the version of the Enterprise Architect model after the last modification.
This version allows to have a tag to compare with the new import to merge.

In the Enterprise Architect ribbon, select "Design -> Model -> Manage -> Manage Baselines..." menu.

image::EA_ManageBaselines.JPG[EA_ManageBaselines.JPG, title="Manage Baselines..."] 

In the displayed Baselines dialog:

image::EA_BaselineDialog.JPG[EA_BaselineDialog.JPG, title="Baselines dialog."]

Select the "New Baseline" button. In the "New Baseline" dialog, type the new version name in the version field.

image::EA_NewBaselineWizard.JPG[EA_NewBaselineWizard.JPG, title="New Baseline."]

In the Baselines dialog, the new version is added in the top of the list.

image::EA_NewVersion.JPG[EA_NewVersion.JPG,title="New version."]

And click in "Close" Button.


Select the Import Capella package in the "Browser" explorer and import the last version of the Capella export file as describe in the <<Import Enterprise Architect model>> section.
 
image::EA_NewImportForMerge.JPG[EA_NewImportForMerge.JPG,title="Import Package from XML"] 
 
In the Import Package from XML dialog, after to configure when describe in the above screeshot, click on the "Import" Button. 
*Warning* don't use the "Merge" Button. The exported Capella file is write in XMI 2.1/ UML 2.1 format. The EA merge doesn't support XMI and UML version upper than 1.3.

After the import, the "New Baseline" is displayed. In the "Version" field, type a new name version.

image::NewBaseLinesForMerge.JPG[NewBaseLinesForMerge.JPG,title="New BaseLine."]

Click on "OK" button. And Click on "Close" button in the "Import Package from XML" dialog.

In the "Browser" explorer, all the data modified before the last import are removed.

In the Enterprise Architect ribbon, select "Design -> Model -> Manage -> Manage Baselines..." menu.

image::EA_BaselineVersionToMerge.JPG[EA_BaselineVersionToMerge.JPG, title="Baselines."]

In the displayed dialog, select the two last versions. 

 
 



== Transformation rules

image::TableRule.JPG[TableRule.JPG] 
